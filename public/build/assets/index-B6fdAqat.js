import{q as j,j as s,r as o,a as P,d as k}from"./app-CHsshOLx.js";import{m as d}from"./index-BRaH1Vhi.js";import{v as A,j as R,y as D}from"./index-DlTII-qT.js";import{d as F}from"./index-CAYLWTKE.js";import{H as y}from"./HeaderSection-DHe4YHrZ.js";import{b as M,c as E}from"./index-d1OENFmb.js";const O=({product:e})=>{var n;const{datasite:x}=j().props;return s.jsxs("div",{className:"relative bg-white shadow-md rounded-md duration-500 hover:shadow-xl pb-6",children:[s.jsx("img",{src:`/storage/uploads/${e==null?void 0:e.featured}`,alt:"Product",className:" object-cover rounded-t-md"}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsx("span",{className:"text-gray-400 mr-3 uppercase text-xs",children:e==null?void 0:e.brand}),s.jsx("p",{className:"text-sm font-bold text-black truncate block capitalize",children:e==null?void 0:e.title}),s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"flex items-center justify-end w-full pb-2",children:[(e==null?void 0:e.valnormal)&&!(e!=null&&e.valpromo)&&s.jsxs("p",{className:"text:base md:text-lg font-semibold text-megb-blue-secundary cursor-auto",children:["R$ ",d(e==null?void 0:e.valnormal)]}),(e==null?void 0:e.valnormal)&&(e==null?void 0:e.valpromo)&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-lg font-semibold text-megb-blue-secundary cursor-auto",children:["R$ ",d(e==null?void 0:e.valpromo)]}),s.jsx("del",{children:s.jsxs("p",{className:"text-sm text-megb-red-primary cursor-auto ml-2",children:["R$ ",d(e==null?void 0:e.valnormal)]})})]})]}),s.jsx("a",{href:`https://wa.me/${(n=x.config)==null?void 0:n.whatsapp}?text=Quero informações sobre ${e==null?void 0:e.title}`,target:"_blank",className:"flex justify-end absolute text-color bottom-2 right-2 text-[#25D366] hover:text-[#25D366]/90",children:s.jsx(A,{size:30})})]})]})]})},q=({data:e})=>{var v,N;const{url:x}=j(),{datasite:n}=j().props,[r,m]=o.useState([]),[i,g]=o.useState(10),[p,f]=o.useState("Carregar Mais"),[b,u]=o.useState(!1),[h,w]=o.useState(!1),I=(v=n==null?void 0:n.allcat)==null?void 0:v.filter(l=>{var t,a;return l.id===((a=(t=e[0])==null?void 0:t.pivot)==null?void 0:a.category_id)}),c=10,z=()=>{i<e.length?g(i+c):g(c)};o.useEffect(()=>{const l=e==null?void 0:e.filter((t,a)=>a<i).sort((t,a)=>t.title>a.title?1:-1);m(l),i<e.length?f("Carregar Mais"):f("Carregar Menos")},[e,i,c]);const C=()=>{if(u(l=>!l),b){const l=r.sort((t,a)=>t.title>a.title?1:-1);m(l)}else{const l=r.sort((t,a)=>t.title<a.title?1:-1);m(l)}},S=async l=>{const t=l.target.value;t==""?m([]):(await k.get(`products/search?product=${t}`).then(a=>{const $=a.data.response.products;m($)}).catch(a=>{console.log(a)}).finally(()=>{console.log("fim")}),w(!0))};return s.jsxs("section",{className:"px-4 py-8 bg-gray-50",children:[s.jsxs("div",{className:"container m-auto mb-4 flex items-center justify-between",children:[s.jsx("div",{children:s.jsxs("button",{className:"flex items-center justify-start gap-4",onClick:()=>C(),children:[s.jsx("span",{className:"text-xs font-semibold uppercase",children:"Ordenar"}),b?s.jsx(M,{size:20}):s.jsx(E,{size:20})]})}),s.jsx("div",{className:"",children:s.jsxs("div",{className:"relative text-gray-500",children:[s.jsx("input",{className:"input-form md:w-72",type:"text",placeholder:"Buscar produto",onChange:S}),s.jsx(R,{size:22,className:"absolute top-2.5 right-2.5"}),h&&s.jsx(P,{href:"/produtos",children:s.jsx(D,{size:22,className:"absolute top-2.5 right-10"})})]})})]}),s.jsxs("div",{className:"container mx-auto",children:[h?s.jsx(y,{title:`Produtos encontrados ${r.length}`}):s.jsx(y,{title:x.split("/")[3]?(N=I[0])==null?void 0:N.name:"Produtos"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-8",children:r==null?void 0:r.map((l,t)=>s.jsx("div",{"data-aos":"zoom-in",children:s.jsx(O,{product:l})},t))}),!h&&e.length>c&&s.jsxs("div",{className:"mt-4 flex flex-col items-center justify-center",children:[s.jsxs("div",{className:"pb-2 text-sm font-semibold text-gray-500",children:[r.length," produtos de ",e.length]}),s.jsxs("button",{className:"flex items-center justify-center gap-1 px-3 py-1 text-white bg-megb-red-primary hover:bg-megb-red-primary/80 transition-colors duration-300 text-sm font-semibold border border-megb-red-primary/20 rounded-md shadow-md",onClick:()=>z(),type:"button",children:[s.jsx("span",{className:`hover:rotate-0 ${i<e.length?"rotate-0":"-rotate-180"} transition-all duration-300`,children:s.jsx(F,{size:25})}),s.jsx("span",{children:p})]})]})]})]})};export{q as P};
